# Production Mosquitto config â€” password auth, no anonymous access.
#
# Setup:
#   sudo mosquitto_passwd -c /etc/mosquitto/passwd irrigation-hub
#   sudo mosquitto_passwd    /etc/mosquitto/passwd irrigation-node
#   sudo cp mosquitto-production.conf /etc/mosquitto/conf.d/irrigation.conf
#   sudo systemctl restart mosquitto

per_listener_settings true

listener 1883 127.0.0.1
allow_anonymous false
password_file /etc/mosquitto/passwd

# Optional: listen on LAN for sensor nodes (uncomment and adjust)
# listener 1883 0.0.0.0
# allow_anonymous false
# password_file /etc/mosquitto/passwd

# Logging
log_dest syslog
log_type warning
log_type error
log_type notice

# Persistence
persistence true
persistence_location /var/lib/mosquitto/

# Limits
max_queued_messages 1000
max_inflight_messages 20
